<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">

<head>
  <!-- Google Tag Manager -->
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-T4G6KMKK');
  </script>
  <!-- End Google Tag Manager -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--本番執筆の際にhead情報更新-->
  <title>【Unity】LevelPlay(ironSource)広告実装を1行で！事前ロード＆バナー自動制御完備のマネージャースクリプト大公開</title>
  <link rel="stylesheet" href="../../AssetConfiguration/MainStyleProcessor.css">
  <link rel="stylesheet" href="../../AssetConfiguration/SubStyleProcessor.css">
  <meta content="UnityでのLevelPlay（ironSource）広告実装を劇的に効率化するマネージャースクリプトを解説します。リワード、インタースティシャル、バナー広告の初期化から表示制御までをシングルトンで一元管理。広告の「事前読み込み」機能によりユーザーの待ち時間をゼロにし、全画面広告表示時のバナー自動非表示・再表示といった細かな挙動も完備しています。広告ボタンの連打による二重表示防止など、実戦で役立つ状態管理フラグの実装についても深掘り。この記事のコードをコピー＆ペーストするだけで、あなたのゲームにスマートでストレスのない広告体験を組み込むことができます。実装前の準備を終えた後の、具体的なスクリプトの使い方や各機能の技術的なポイントを丁寧に解説しているので、収益化を目指すUnity開発者必見の内容です。" name="description">
  <meta name="keywords" content="Unity, LevelPlay, ironSource, 広告実装, リワード広告, インタースティシャル広告, バナー広告, メディエーション, C#, スクリプト, マネージャー, 収益化, 事前読み込み, シングルトン, マネタイズ">
  <meta property="og:image" content="https://pbs.twimg.com/media/GszfGSzawAEgprQ?format=png&name=medium">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="generator" content="Hayadebi Blog">
  <link rel="icon" type="image/png" href="https://pbs.twimg.com/media/G2H3yzRaIAIIHjw?format=png&name=240x240">
  <!--本番執筆の際に前と次を設定↓-->
  <link rel="next" href="blog_dev_2.html">
  <!--本番執筆の際にnoindex削除↓-->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-GLW3M3X7B3" defer></script>
  <script defer>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-GLW3M3X7B3');
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "【Unity】LevelPlay(ironSource)広告実装を1行で！事前ロード＆バナー自動制御完備のマネージャースクリプト大公開",
    "image": "https://pbs.twimg.com/media/GszfGSzawAEgprQ?format=png&name=medium",
    "datePublished": "2026-02-18",
    "dateModified": "2026-02-18",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://hayadebi.github.io/Accounting-ai-app/Blogs/Developer/blog_dev_1.html"
    },
    "author": {
      "@type": "Person",
      "name": "ハヤデビ",
      "jobTitle": "フリーランスエンジニア",
      "url": "https://hayadebi.github.io/Accounting-ai-app/profile.html",
      "sameAs": [
        "https://x.com/hayadebi",
        "https://unitygamehayadebi.jimdofree.com"
      ]
    },
    "publisher": {
      "@type": "Organization",
      "name": "ハヤデビ",
      "logo": {
        "@type": "ImageObject",
        "url": "https://pbs.twimg.com/media/G5mBHiiacAIWGvt?format=png&name=900x900"
      }
    }
  }
  </script>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T4G6KMKK" height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->
  <header class="header">
    <nav class="nav-container">
      <div class="hamburger" id="hamburger">
        <span>
        </span>
        <span>
        </span>
        <span>
        </span>
      </div>
      <ul class="nav-links" id="navLinks">
        <li>
          <a href="../../index.html" alt="ハヤデビのツール工房ホームページ">ホーム</a>
        </li>
        <li>
          <a href="../../tools.html" alt="ハヤデビのツール工房/ツール一覧">ツール</a>
        </li>
        <li>
          <a href="../../coconala.html" alt="ハヤデビのツール工房/ココナラ事業一覧">事業</a>
        </li>
        <li>
          <a href="../../blogs.html" alt="ハヤデビのツール工房/ブログ一覧">ブログ</a>
        </li>
        <li>
          <a href="../../profile.html" alt="ハヤデビのツール工房/プロフィール詳細">プロフィール</a>
        </li>
      </ul>
    </nav>
  </header>
  <main class="main-container">
    <!-- タイトル本番執筆更新 -->
    <div class="hero">
      <h1>【Unity】LevelPlay(ironSource)広告実装を1行で！事前ロード＆バナー自動制御完備のマネージャースクリプト大公開</h1>
    </div>
    <!-- 本番執筆で内容に応じて目次セクション更新 -->
    <section class="section">
      <div class="recommend-icon">
        <center><img src="https://pbs.twimg.com/media/GszfGSzawAEgprQ?format=png&name=medium" alt="記事サムネイル" style="object-fit: cover;width:75%;max-width:100%;height: auto; display: block;border-radius:2%;padding:10px 0;"></center>
      </div>
      <h2>目次</h2>
      <div style="display: flex; flex-wrap: wrap; gap: 10px;">
        <a href="#section-1" style="padding: 8px 15px; background: linear-gradient(135deg, #0066cc 0%, #00bfff 100%); color: #fff; text-decoration: none; border-radius: 4px; font-weight: 600; font-size: 0.9rem; transition: opacity 0.3s ease;">1. はじめに</a>
        <a href="#section-2" style="padding: 8px 15px; background: linear-gradient(135deg, #0066cc 0%, #00bfff 100%); color: #fff; text-decoration: none; border-radius: 4px; font-weight: 600; font-size: 0.9rem; transition: opacity 0.3s ease;">2. メインコード</a>
        <a href="#section-3" style="padding: 8px 15px; background: linear-gradient(135deg, #0066cc 0%, #00bfff 100%); color: #fff; text-decoration: none; border-radius: 4px; font-weight: 600; font-size: 0.9rem; transition: opacity 0.3s ease;">3. 使い方</a>
        <a href="#section-4" style="padding: 8px 15px; background: linear-gradient(135deg, #0066cc 0%, #00bfff 100%); color: #fff; text-decoration: none; border-radius: 4px; font-weight: 600; font-size: 0.9rem; transition: opacity 0.3s ease;">4. まとめ</a>
      </div>
      <p class="hero-subtitle">※当記事はプロモーションも含みます</p>
    </section>
    <div style="width:100%;height:auto;margin-bottom:20px;"><center><script type="text/javascript">
var adstir_vars = {
  ver: "4.0",
  app_id: "MEDIA-8d0588f8",
  ad_spot: 1,
  center: false
};
</script>
<script type="text/javascript" src="https://js.ad-stir.com/js/adstir.js"></script></center>
    </div>
    <section class="section" id="section-1">
      <!--コピペテンプレート-->
      <!-- <div class="recommend-icon"><img src="#" alt="記事サムネイル" style="object-fit: cover;max-width:100%;height: auto; display: block;border-radius:2%;" /></div> -->
      <!-- <a href="#" style="color: #a8d0ff;overflow-wrap: break-word;" alt="リンク説明" target="_blank" referrerpolicy="no-referrer-when-downgrade">リンク</a> -->
      <h2>はじめに</h2>
      <p><strong>Unity</strong>でゲームを開発していて、いざ「収益化しよう！」と思った時、避けて通れないのが<strong>広告の実装</strong>ですよね。
        特に<strong>LevelPlay（ironSource）</strong>は強力なメディエーションですが、リワード広告、インタースティシャル広告、バナー広告……と、それぞれバラバラに制御しようとすると、コードがスパゲッティ状態になりがちです。
        「広告を表示する時にバナーが邪魔だな」とか、「読み込みが間に合わなくて表示されない！」なんて経験もありませんか？</p>
    </section>
    <section class="section" id="section-2">
      <h2>メインコード</h2>
      <p>以下のコードを、新しく作成した<strong>AdsManager.cs</strong>にコピー＆ペーストして使ってください。</p>
      <div style=
"position: relative; max-height: 600px; overflow-y: auto; background-color: #1e1e1e; border-radius: 8px; padding: 20px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 13px; line-height: 1.6; color: #d4d4d4; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
    <button id="copyBtn" style=
    "position: sticky; top: 0; right: 0; float: right; background-color: #0e639c; color: white; border: none; border-radius: 4px; padding: 8px 16px; cursor: pointer; font-size: 12px; font-weight: bold; z-index: 10; margin-bottom: 10px; transition: background-color 0.3s;">
    コピー</button>

    <pre id="codeContent" style="margin: 0; padding: 0; white-space: pre; word-wrap: normal; overflow-x: auto; clear: both;"><span style="color: #569cd6;">using</span> System;
<span style="color: #569cd6;">using</span> System.Collections;
<span style="color: #569cd6;">using</span> UnityEngine;
<span style="color: #569cd6;">using</span> Unity.Services.Core;
<span style="color: #569cd6;">using</span> Unity.Services.LevelPlay;

<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">AdsManager</span> : <span style="color: #4ec9b0;">MonoBehaviour</span>
{
    <span style="color: #569cd6;">public</span> <span style="color: #569cd6;">static</span> <span style="color: #4ec9b0;">AdsManager</span> Instance = <span style="color: #569cd6;">null</span>;

    [<span style="color: #4ec9b0;">SerializeField</span>] <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">string</span> gameId = <span style=
"color: #ce9178;">"YOUR_GAME_ID"</span>;
    [<span style="color: #4ec9b0;">SerializeField</span>] <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">string</span> rewardedAdUnitId = <span style=
"color: #ce9178;">"YOUR_REWARDED_AD_UNIT_ID"</span>;
    [<span style="color: #4ec9b0;">SerializeField</span>] <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">string</span> interstitialAdUnitId = <span style=
"color: #ce9178;">"YOUR_INTERSTITIAL_AD_UNIT_ID"</span>;
    [<span style="color: #4ec9b0;">SerializeField</span>] <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">string</span> bannerAdUnitId = <span style=
"color: #ce9178;">"YOUR_BANNER_AD_UNIT_ID"</span>;

    [<span style="color: #4ec9b0;">SerializeField</span>] <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">bool</span> enableDebugLogs = <span style=
"color: #569cd6;">true</span>;

    <span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">Action</span>&lt;<span style="color: #569cd6;">bool</span>&gt; onRewardedAdCompleted;
    <span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">Action</span>&lt;<span style="color: #569cd6;">bool</span>&gt; onInterstitialAdCompleted;
    <span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">Action</span>&lt;<span style="color: #569cd6;">bool</span>&gt; onBannerAdCompleted;

    <span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LevelPlayRewardedAd</span> rewardedAd;
    <span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">LevelPlayInterstitialAd</span> interstitialAd;
    <span style="color: #569cd6;">public</span> <span style="color: #4ec9b0;">LevelPlayBannerAd</span> bannerAd;

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">bool</span> isInitialized = <span style="color: #569cd6;">false</span>;
    <span style="color: #569cd6;">public</span> <span style="color: #569cd6;">bool</span> isStart = <span style="color: #569cd6;">false</span>;

    <span style="color: #6a9955;">// 広告の読み込み状態を追跡</span>
    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">bool</span> isRewardedAdLoading = <span style="color: #569cd6;">false</span>;
    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">bool</span> isInterstitialAdLoading = <span style="color: #569cd6;">false</span>;
    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">bool</span> isShowingRewardedAd = <span style="color: #569cd6;">false</span>;
    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">bool</span> isShowingInterstitialAd = <span style="color: #569cd6;">false</span>;

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">Awake</span>()
    {
        <span style="color: #569cd6;">if</span> (Instance == <span style="color: #569cd6;">null</span>)
        {
            Instance = <span style="color: #569cd6;">this</span>;
            <span style="color: #dcdcaa;">DontDestroyOnLoad</span>(<span style="color: #569cd6;">this</span>.gameObject);
        }
        <span style="color: #569cd6;">else</span>
        {
            <span style="color: #dcdcaa;">Destroy</span>(<span style="color: #569cd6;">this</span>.gameObject);
        }
    }

    <span style="color: #4ec9b0;">IEnumerator</span> <span style="color: #dcdcaa;">Start</span>()
    {
        <span style="color: #569cd6;">yield</span> <span style="color: #569cd6;">return</span> <span style="color: #dcdcaa;">StartCoroutine</span>(<span style=
"color: #dcdcaa;">InitializeAds</span>());

        <span style="color: #569cd6;">if</span> (isInitialized &amp;&amp; Application.internetReachability != NetworkReachability.NotReachable)
        {
            <span style="color: #dcdcaa;">ShowBannerAd</span>((completed) =&gt; {
                <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Banner ad initialization: </span>{completed}<span style="color: #ce9178;">"</span>);
            });
        }
        isStart = <span style="color: #569cd6;">true</span>;
    }

    <span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">IEnumerator</span> <span style="color: #dcdcaa;">InitializeAds</span>()
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Starting ads initialization..."</span>);

        <span style="color: #569cd6;">var</span> initTask = UnityServices.<span style="color: #dcdcaa;">InitializeAsync</span>();
        <span style="color: #569cd6;">yield</span> <span style="color: #569cd6;">return</span> <span style="color: #569cd6;">new</span> <span style=
"color: #dcdcaa;">WaitUntil</span>(() =&gt; initTask.IsCompleted);

        <span style="color: #569cd6;">if</span> (initTask.IsFaulted)
        {
            <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Unity Services initialization failed: </span>{initTask.Exception}<span style="color: #ce9178;">"</span>);
            <span style="color: #569cd6;">yield</span> <span style="color: #569cd6;">break</span>;
        }

        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Unity Services initialized successfully"</span>);

        <span style="color: #569cd6;">bool</span> initSuccess = <span style="color: #569cd6;">false</span>;
        <span style="color: #569cd6;">bool</span> initFailed = <span style="color: #569cd6;">false</span>;

        LevelPlay.OnInitSuccess += (info) =&gt;
        {
            <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"LevelPlay initialized successfully: </span>{info}<span style="color: #ce9178;">"</span>);
            initSuccess = <span style="color: #569cd6;">true</span>;
            isInitialized = <span style="color: #569cd6;">true</span>;
        };

        LevelPlay.OnInitFailed += (error) =&gt;
        {
            <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"LevelPlay initialization failed: </span>{error}<span style="color: #ce9178;">"</span>);
            initFailed = <span style="color: #569cd6;">true</span>;
        };

        LevelPlay.<span style="color: #dcdcaa;">Init</span>(gameId);

        <span style="color: #569cd6;">float</span> timeout = <span style="color: #b5cea8;">10f</span>;
        <span style="color: #569cd6;">float</span> elapsed = <span style="color: #b5cea8;">0f</span>;
        <span style="color: #569cd6;">while</span> (!initSuccess &amp;&amp; !initFailed &amp;&amp; elapsed &lt; timeout)
        {
            elapsed += Time.deltaTime;
            <span style="color: #569cd6;">yield</span> <span style="color: #569cd6;">return</span> <span style="color: #569cd6;">null</span>;
        }

        <span style="color: #569cd6;">if</span> (!initSuccess)
        {
            <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"LevelPlay initialization timeout or failed"</span>);
            <span style="color: #569cd6;">yield</span> <span style="color: #569cd6;">break</span>;
        }

        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Ads initialization completed successfully"</span>);

        <span style="color: #6a9955;">// 初期化後に広告インスタンスを作成</span>
        <span style="color: #dcdcaa;">InitializeAdInstances</span>();
    }

    <span style="color: #6a9955;">// 広告インスタンスを一度だけ作成</span>
    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">InitializeAdInstances</span>()
    {
        <span style="color: #6a9955;">// リワード広告の初期化</span>
        <span style="color: #569cd6;">var</span> rewardConfig = <span style="color: #569cd6;">new</span> LevelPlayRewardedAd.Config.<span style="color: #dcdcaa;">Builder</span>()
            .<span style="color: #dcdcaa;">SetBidFloor</span>(<span style="color: #b5cea8;">15</span>)
            .<span style="color: #dcdcaa;">Build</span>();
        rewardedAd = <span style="color: #569cd6;">new</span> <span style="color: #dcdcaa;">LevelPlayRewardedAd</span>(rewardedAdUnitId, rewardConfig);
        <span style="color: #dcdcaa;">RegisterRewardedAdEvents</span>();

        <span style="color: #6a9955;">// インタースティシャル広告の初期化</span>
        <span style="color: #569cd6;">var</span> interstitialConfig = <span style="color: #569cd6;">new</span> LevelPlayInterstitialAd.Config.<span style="color: #dcdcaa;">Builder</span>()
            .<span style="color: #dcdcaa;">SetBidFloor</span>(<span style="color: #b5cea8;">9</span>)
            .<span style="color: #dcdcaa;">Build</span>();
        interstitialAd = <span style="color: #569cd6;">new</span> <span style="color: #dcdcaa;">LevelPlayInterstitialAd</span>(interstitialAdUnitId, interstitialConfig);
        <span style="color: #dcdcaa;">RegisterInterstitialAdEvents</span>();

        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Ad instances initialized"</span>);
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">RegisterRewardedAdEvents</span>()
    {
        <span style="color: #569cd6;">if</span> (rewardedAd == <span style="color: #569cd6;">null</span>) <span style="color: #569cd6;">return</span>;

        rewardedAd.OnAdLoaded += OnRewardedAdLoaded;
        rewardedAd.OnAdLoadFailed += OnRewardedAdLoadFailed;
        rewardedAd.OnAdDisplayed += OnRewardedAdDisplayed;
        rewardedAd.OnAdDisplayFailed += OnRewardedAdDisplayFailed;
        rewardedAd.OnAdRewarded += OnAdRewarded;
        rewardedAd.OnAdClosed += OnRewardedAdClosed;
        rewardedAd.OnAdClicked += OnRewardedAdClicked;

        <span style="color: #dcdcaa;">StartCoroutine</span>(<span style="color: #dcdcaa;">PreloadRewardedAdDelayed</span>());
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">RegisterInterstitialAdEvents</span>()
    {
        <span style="color: #569cd6;">if</span> (interstitialAd == <span style="color: #569cd6;">null</span>) <span style="color: #569cd6;">return</span>;

        interstitialAd.OnAdLoaded += OnInterstitialAdLoaded;
        interstitialAd.OnAdLoadFailed += OnInterstitialAdLoadFailed;
        interstitialAd.OnAdDisplayed += OnInterstitialAdDisplayed;
        interstitialAd.OnAdDisplayFailed += OnInterstitialAdDisplayFailed;
        interstitialAd.OnAdClosed += OnInterstitialAdClosed;
        interstitialAd.OnAdClicked += OnInterstitialAdClicked;

        <span style="color: #dcdcaa;">StartCoroutine</span>(<span style="color: #dcdcaa;">PreloadInterstitialAdDelayed</span>());
    }

    <span style="color: #6a9955;">// ========== リワード広告 ==========</span>
    <span style="color: #569cd6;">public</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">ShowRewardedAd</span>(<span style=
"color: #4ec9b0;">Action</span>&lt;<span style="color: #569cd6;">bool</span>&gt; onCompleted)
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"ShowRewardedAd called"</span>);

        <span style="color: #569cd6;">if</span> (!isInitialized)
        {
            <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Ads not initialized yet"</span>);
            onCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
            <span style="color: #569cd6;">return</span>;
        }

        <span style="color: #569cd6;">if</span> (isRewardedAdLoading || isShowingRewardedAd)
        {
            <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Rewarded ad already loading or showing"</span>);
            onCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
            <span style="color: #569cd6;">return</span>;
        }

        <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">CloseBannerAd</span>();

        onRewardedAdCompleted = onCompleted;
        isRewardedAdLoading = <span style="color: #569cd6;">true</span>;

        <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Loading rewarded ad... IsAdReady: </span>{rewardedAd?.<span style=
"color: #dcdcaa;">IsAdReady</span>()}<span style="color: #ce9178;">"</span>);

        <span style="color: #569cd6;">if</span> (rewardedAd != <span style="color: #569cd6;">null</span> &amp;&amp; rewardedAd.<span style="color: #dcdcaa;">IsAdReady</span>())
        {
            <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Rewarded ad already loaded, showing immediately"</span>);
            isRewardedAdLoading = <span style="color: #569cd6;">false</span>;
            <span style="color: #dcdcaa;">ShowRewardedAdInternal</span>();
        }
        <span style="color: #569cd6;">else</span>
        {
            <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Loading new rewarded ad"</span>);
            rewardedAd?.<span style="color: #dcdcaa;">LoadAd</span>();
        }
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">ShowRewardedAdInternal</span>()
    {
        <span style="color: #569cd6;">if</span> (rewardedAd != <span style="color: #569cd6;">null</span> &amp;&amp; rewardedAd.<span style="color: #dcdcaa;">IsAdReady</span>() &amp;&amp;
            !LevelPlayRewardedAd.<span style="color: #dcdcaa;">IsPlacementCapped</span>(rewardedAdUnitId))
        {
            <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Showing rewarded ad..."</span>);
            isShowingRewardedAd = <span style="color: #569cd6;">true</span>;
            rewardedAd.<span style="color: #dcdcaa;">ShowAd</span>(rewardedAdUnitId);
        }
        <span style="color: #569cd6;">else</span>
        {
            <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Rewarded ad not ready. IsAdReady: </span>{rewardedAd?.<span style=
"color: #dcdcaa;">IsAdReady</span>()}<span style="color: #ce9178;">, IsCapped: </span>{LevelPlayRewardedAd.<span style="color: #dcdcaa;">IsPlacementCapped</span>(rewardedAdUnitId)}<span style=
"color: #ce9178;">"</span>);
            <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">ViewBannerAd</span>();
            onRewardedAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
        }
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnRewardedAdLoaded</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
    {
        <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Rewarded ad loaded: </span>{info}<span style="color: #ce9178;">"</span>);

        <span style="color: #6a9955;">// ユーザーが広告を要求していた場合のみ表示</span>
        <span style="color: #569cd6;">if</span> (isRewardedAdLoading)
        {
            isRewardedAdLoading = <span style="color: #569cd6;">false</span>;
            <span style="color: #dcdcaa;">ShowRewardedAdInternal</span>();
        }
        <span style="color: #569cd6;">else</span>
        {
            <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Rewarded ad loaded but not requested by user - keeping it ready"</span>);
        }
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnRewardedAdLoadFailed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdError</span> error)
    {
        <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Rewarded ad load failed: ErrorCode=</span>{error.ErrorCode}<span style=
"color: #ce9178;">, ErrorMessage=</span>{error.ErrorMessage}<span style="color: #ce9178;">"</span>);
        isRewardedAdLoading = <span style="color: #569cd6;">false</span>;
        <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">ViewBannerAd</span>();
        onRewardedAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnRewardedAdDisplayed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
    {
        <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Rewarded ad displayed: </span>{info}<span style="color: #ce9178;">"</span>);
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnRewardedAdDisplayFailed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info, <span style="color: #4ec9b0;">LevelPlayAdError</span> error)
    {
        <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Rewarded ad display failed: ErrorCode=</span>{error.ErrorCode}<span style=
"color: #ce9178;">, ErrorMessage=</span>{error.ErrorMessage}<span style="color: #ce9178;">"</span>);
        isShowingRewardedAd = <span style="color: #569cd6;">false</span>;
        <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">ViewBannerAd</span>();
        onRewardedAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnAdRewarded</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info, <span style="color: #4ec9b0;">LevelPlayReward</span> reward)
    {
        <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"User rewarded: </span>{reward.Name}<span style="color: #ce9178;"> x </span>{reward.Amount}<span style=
"color: #ce9178;">"</span>);
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnRewardedAdClosed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
    {
        <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Rewarded ad closed: </span>{info}<span style="color: #ce9178;">"</span>);
        isShowingRewardedAd = <span style="color: #569cd6;">false</span>;
        <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">ViewBannerAd</span>();
        onRewardedAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">true</span>);

        <span style="color: #6a9955;">// 次回のために事前読み込み(表示はしない)</span>
        <span style="color: #dcdcaa;">StartCoroutine</span>(<span style="color: #dcdcaa;">PreloadRewardedAdDelayed</span>());
    }

    <span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnRewardedAdClicked</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
    {
        <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Rewarded ad clicked: </span>{info}<span style="color: #ce9178;">"</span>);
    }

    <span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">IEnumerator</span> <span style="color: #dcdcaa;">PreloadRewardedAdDelayed</span>()
    {
        <span style="color: #569cd6;">yield</span> <span style="color: #569cd6;">return</span> <span style="color: #569cd6;">new</span> <span style=
"color: #dcdcaa;">WaitForSeconds</span>(<span style="color: #b5cea8;">1f</span>);
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Preloading next rewarded ad"</span>);
        rewardedAd?.<span style="color: #dcdcaa;">LoadAd</span>();
    }

    <span style="color: #6a9955;">// ========== インタースティシャル広告 ==========</span>
    <span style="color: #569cd6;">public</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">ShowInterstitialAd</span>(<span style=
"color: #4ec9b0;">Action</span>&lt;<span style="color: #569cd6;">bool</span>&gt; onCompleted)
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"ShowInterstitialAd called"</span>);

        <span style="color: #569cd6;">if</span> (!isInitialized)
        {
            <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Ads not initialized yet"</span>);
            onCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
            <span style="color: #569cd6;">return</span>;
        }

        <span style="color: #569cd6;">if</span> (isInterstitialAdLoading || isShowingInterstitialAd)
        {
            <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Interstitial ad already loading or showing"</span>);
            onCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">続ける11:24false</span>);
<span style="color: #569cd6;">return</span>;
}
    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">CloseBannerAd</span>();

    onInterstitialAdCompleted = onCompleted;
    isInterstitialAdLoading = <span style="color: #569cd6;">true</span>;

    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Loading interstitial ad... IsAdReady: </span>{interstitialAd?.<span style=
"color: #dcdcaa;">IsAdReady</span>()}<span style="color: #ce9178;">"</span>);

    <span style="color: #569cd6;">if</span> (interstitialAd != <span style="color: #569cd6;">null</span> &amp;&amp; interstitialAd.<span style="color: #dcdcaa;">IsAdReady</span>())
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Interstitial ad already loaded, showing immediately"</span>);
        isInterstitialAdLoading = <span style="color: #569cd6;">false</span>;
        <span style="color: #dcdcaa;">ShowInterstitialAdInternal</span>();
    }
    <span style="color: #569cd6;">else</span>
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Loading new interstitial ad"</span>);
        interstitialAd?.<span style="color: #dcdcaa;">LoadAd</span>();
    }
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">ShowInterstitialAdInternal</span>()
{
    <span style="color: #569cd6;">if</span> (interstitialAd != <span style="color: #569cd6;">null</span> &amp;&amp; interstitialAd.<span style="color: #dcdcaa;">IsAdReady</span>() &amp;&amp;
        !LevelPlayInterstitialAd.<span style="color: #dcdcaa;">IsPlacementCapped</span>(interstitialAdUnitId))
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Showing interstitial ad..."</span>);
        isShowingInterstitialAd = <span style="color: #569cd6;">true</span>;
        interstitialAd.<span style="color: #dcdcaa;">ShowAd</span>(interstitialAdUnitId);
    }
    <span style="color: #569cd6;">else</span>
    {
        <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Interstitial ad not ready. IsAdReady: </span>{interstitialAd?.<span style=
"color: #dcdcaa;">IsAdReady</span>()}<span style="color: #ce9178;">, IsCapped: </span>{LevelPlayInterstitialAd.<span style=
"color: #dcdcaa;">IsPlacementCapped</span>(interstitialAdUnitId)}<span style="color: #ce9178;">"</span>);
        <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">ViewBannerAd</span>();
        onInterstitialAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
    }
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnInterstitialAdLoaded</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Interstitial ad loaded: </span>{info}<span style="color: #ce9178;">"</span>);

    <span style="color: #6a9955;">// ユーザーが広告を要求していた場合のみ表示</span>
    <span style="color: #569cd6;">if</span> (isInterstitialAdLoading)
    {
        isInterstitialAdLoading = <span style="color: #569cd6;">false</span>;
        <span style="color: #dcdcaa;">ShowInterstitialAdInternal</span>();
    }
    <span style="color: #569cd6;">else</span>
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Interstitial ad loaded but not requested by user - keeping it ready"</span>);
    }
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnInterstitialAdLoadFailed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdError</span> error)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Interstitial ad load failed: ErrorCode=</span>{error.ErrorCode}<span style=
"color: #ce9178;">, ErrorMessage=</span>{error.ErrorMessage}<span style="color: #ce9178;">"</span>);
    isInterstitialAdLoading = <span style="color: #569cd6;">false</span>;
    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">ViewBannerAd</span>();
    onInterstitialAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnInterstitialAdDisplayed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Interstitial ad displayed: </span>{info}<span style="color: #ce9178;">"</span>);
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnInterstitialAdDisplayFailed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info, <span style="color: #4ec9b0;">LevelPlayAdError</span> error)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Interstitial ad display failed: ErrorCode=</span>{error.ErrorCode}<span style=
"color: #ce9178;">, ErrorMessage=</span>{error.ErrorMessage}<span style="color: #ce9178;">"</span>);
    isShowingInterstitialAd = <span style="color: #569cd6;">false</span>;
    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">ViewBannerAd</span>();
    onInterstitialAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnInterstitialAdClosed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Interstitial ad closed: </span>{info}<span style="color: #ce9178;">"</span>);
    isShowingInterstitialAd = <span style="color: #569cd6;">false</span>;
    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>) <span style="color: #dcdcaa;">ViewBannerAd</span>();
    onInterstitialAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">true</span>);

    <span style="color: #dcdcaa;">StartCoroutine</span>(<span style="color: #dcdcaa;">PreloadInterstitialAdDelayed</span>());
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnInterstitialAdClicked</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Interstitial ad clicked: </span>{info}<span style="color: #ce9178;">"</span>);
}

<span style="color: #569cd6;">private</span> <span style="color: #4ec9b0;">IEnumerator</span> <span style="color: #dcdcaa;">PreloadInterstitialAdDelayed</span>()
{
    <span style="color: #569cd6;">yield</span> <span style="color: #569cd6;">return</span> <span style="color: #569cd6;">new</span> <span style="color: #dcdcaa;">WaitForSeconds</span>(<span style=
"color: #b5cea8;">1f</span>);
    <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Preloading next interstitial ad"</span>);
    interstitialAd?.<span style="color: #dcdcaa;">LoadAd</span>();
}

<span style="color: #6a9955;">// ========== バナー広告 ==========</span>
<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">ShowBannerAd</span>(<span style="color: #4ec9b0;">Action</span>&lt;<span style=
"color: #569cd6;">bool</span>&gt; onCompleted)
{
    <span style="color: #569cd6;">if</span> (!isInitialized)
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Ads not initialized yet"</span>);
        onCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
        <span style="color: #569cd6;">return</span>;
    }

    onBannerAdCompleted = onCompleted;

    <span style="color: #6a9955;">// バナー広告の設定</span>
    <span style="color: #569cd6;">var</span> configBuilder = <span style="color: #569cd6;">new</span> LevelPlayBannerAd.Config.<span style="color: #dcdcaa;">Builder</span>();
    configBuilder.<span style="color: #dcdcaa;">SetSize</span>(LevelPlayAdSize.BANNER);
    configBuilder.<span style="color: #dcdcaa;">SetPosition</span>(LevelPlayBannerPosition.BottomCenter);
    configBuilder.<span style="color: #dcdcaa;">SetDisplayOnLoad</span>(<span style="color: #569cd6;">true</span>);
    configBuilder.<span style="color: #dcdcaa;">SetRespectSafeArea</span>(<span style="color: #569cd6;">true</span>);
    configBuilder.<span style="color: #dcdcaa;">SetPlacementName</span>(<span style="color: #ce9178;">"DefaultBanner"</span>);
    configBuilder.<span style="color: #dcdcaa;">SetBidFloor</span>(<span style="color: #b5cea8;">0.3</span>);
    <span style="color: #569cd6;">var</span> bannerConfig = configBuilder.<span style="color: #dcdcaa;">Build</span>();

    bannerAd = <span style="color: #569cd6;">new</span> <span style="color: #dcdcaa;">LevelPlayBannerAd</span>(bannerAdUnitId, bannerConfig);

    <span style="color: #6a9955;">// イベント登録</span>
    bannerAd.OnAdLoaded += OnBannerAdLoaded;
    bannerAd.OnAdLoadFailed += OnBannerAdLoadFailed;
    bannerAd.OnAdDisplayed += OnBannerAdDisplayed;
    bannerAd.OnAdDisplayFailed += OnBannerAdDisplayFailed;
    bannerAd.OnAdClicked += OnBannerAdClicked;

    <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Loading banner ad..."</span>);
    bannerAd.<span style="color: #dcdcaa;">LoadAd</span>();
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnBannerAdLoaded</span>(<span style="color: #4ec9b0;">LevelPlayAdInfo</span> info)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Banner ad loaded: </span>{info}<span style="color: #ce9178;">"</span>);

    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>)
    {
        bannerAd.<span style="color: #dcdcaa;">ShowAd</span>();
        onBannerAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">true</span>);
    }
    <span style="color: #569cd6;">else</span>
    {
        onBannerAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
    }
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnBannerAdLoadFailed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdError</span> error)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Banner ad load failed: </span>{error}<span style="color: #ce9178;">"</span>);
    onBannerAdCompleted?.<span style="color: #dcdcaa;">Invoke</span>(<span style="color: #569cd6;">false</span>);
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnBannerAdDisplayed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Banner ad displayed: </span>{info}<span style="color: #ce9178;">"</span>);
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnBannerAdDisplayFailed</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info, <span style="color: #4ec9b0;">LevelPlayAdError</span> error)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Banner ad display failed: </span>{error}<span style="color: #ce9178;">"</span>);
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnBannerAdClicked</span>(<span style=
"color: #4ec9b0;">LevelPlayAdInfo</span> info)
{
    <span style="color: #dcdcaa;">LogMessage</span>($<span style="color: #ce9178;">"Banner ad clicked: </span>{info}<span style="color: #ce9178;">"</span>);
}

<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">LoadBannerAd</span>()
{
    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>)
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Reloading banner ad..."</span>);
        bannerAd.<span style="color: #dcdcaa;">LoadAd</span>();
    }
}

<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">CloseBannerAd</span>()
{
    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>)
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Hiding banner ad"</span>);
        bannerAd.<span style="color: #dcdcaa;">HideAd</span>();
    }
}

<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">DestroyBannerAd</span>()
{
    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>)
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Destroying banner ad"</span>);
        bannerAd.<span style="color: #dcdcaa;">DestroyAd</span>();
        bannerAd.<span style="color: #dcdcaa;">Dispose</span>();
        bannerAd = <span style="color: #569cd6;">null</span>;
        Resources.<span style="color: #dcdcaa;">UnloadUnusedAssets</span>();
    }
}

<span style="color: #569cd6;">public</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">ViewBannerAd</span>()
{
    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>)
    {
        <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #ce9178;">"Showing banner ad"</span>);
        bannerAd.<span style="color: #dcdcaa;">ShowAd</span>();
    }
}

<span style="color: #6a9955;">// ========== ユーティリティ ==========</span>
<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">LogMessage</span>(<span style="color: #569cd6;">string</span> message)
{
    <span style="color: #569cd6;">if</span> (enableDebugLogs)
    {
        Debug.<span style="color: #dcdcaa;">Log</span>($<span style="color: #ce9178;">"[AdsManager] </span>{message}<span style="color: #ce9178;">"</span>);
    }
}

<span style="color: #569cd6;">private</span> <span style="color: #569cd6;">void</span> <span style="color: #dcdcaa;">OnDestroy</span>()
{
    <span style="color: #6a9955;">// イベント登録解除</span>
    <span style="color: #569cd6;">if</span> (rewardedAd != <span style="color: #569cd6;">null</span>)
    {
        rewardedAd.OnAdLoaded -= OnRewardedAdLoaded;
        rewardedAd.OnAdLoadFailed -= OnRewardedAdLoadFailed;
        rewardedAd.OnAdDisplayed -= OnRewardedAdDisplayed;
        rewardedAd.OnAdDisplayFailed -= OnRewardedAdDisplayFailed;
        rewardedAd.OnAdRewarded -= OnAdRewarded;
        rewardedAd.OnAdClosed -= OnRewardedAdClosed;
        rewardedAd.OnAdClicked -= OnRewardedAdClicked;
        rewardedAd.<span style="color: #dcdcaa;">Dispose</span>();
    }

    <span style="color: #569cd6;">if</span> (interstitialAd != <span style="color: #569cd6;">null</span>)
    {
        interstitialAd.OnAdLoaded -= OnInterstitialAdLoaded;
        interstitialAd.OnAdLoadFailed -= OnInterstitialAdLoadFailed;
        interstitialAd.OnAdDisplayed -= OnInterstitialAdDisplayed;
        interstitialAd.OnAdDisplayFailed -= OnInterstitialAdDisplayFailed;
        interstitialAd.OnAdClosed -= OnInterstitialAdClosed;
        interstitialAd.OnAdClicked -= OnInterstitialAdClicked;
        interstitialAd.<span style="color: #dcdcaa;">Dispose</span>();
    }

    <span style="color: #569cd6;">if</span> (bannerAd != <span style="color: #569cd6;">null</span>)
    {
        bannerAd.OnAdLoaded -= OnBannerAdLoaded;
        bannerAd.OnAdLoadFailed -= OnBannerAdLoadFailed;
        bannerAd.OnAdDisplayed -= OnBannerAdDisplayed;
        bannerAd.OnAdDisplayFailed -= OnBannerAdDisplayFailed;
        bannerAd.OnAdClicked -= OnBannerAdClicked;
        bannerAd.<span style="color: #dcdcaa;">Dispose</span>();
    }
}
}</pre>
</div>
<script>
/* <![CDATA[ */
document.getElementById('copyBtn').addEventListener('click', function() {
  const code = document.getElementById('codeContent').innerText;
  navigator.clipboard.writeText(code).then(function() {
    const btn = document.getElementById('copyBtn');
    btn.textContent = 'コピー完了!';
    btn.style.backgroundColor = '#28a745';
    setTimeout(function() {
      btn.textContent = 'コピー';
      btn.style.backgroundColor = '#0e639c';
    }, 2000);
  }).catch(function(err) {
    alert('コピーに失敗しました');
  });
});
/*]]>*/
</script>
    </section>
    <section class="section" id="section-3">
      <h2>使い方</h2>
      <p>さて、コードをコピペした後の具体的な使い方についてお話ししますね。
        このマネージャーは「シングルトン」という仕組みを使っているので、一度シーンに置いてしまえば、どこからでも簡単に呼び出せます。</p>
      
      <h3 style="font-size:1.4rem;color: #a8d0ff;">セットアップの手順</h3>
      <p>まずは、Hierarchyに空のGameObjectを作成し、名前を「AdsManager」にでもします。
        そこに先ほどのスクリプトをアタッチしてください。
        Inspectorに以下項目が表示されるので、ironSourceのダッシュボードから取得したIDを入力します。</p>
      <div class="recommend-boxes">
        <div class="recommend-box" style="text-align: left;margin-bottom:0;">
          <p>・Game Id: アプリのゲームID
            ・Rewarded Ad Unit Id: リワード広告のID
            ・Interstitial Ad Unit Id: インタースティシャル広告のID
            ・Banner Ad Unit Id: バナー広告のID</p>
        </div>
      </div>
      <p>これだけで準備は完了です。
        Awakeメソッド内で DontDestroyOnLoad を呼んでいるので、シーンを切り替えてもこのマネージャーは消えずに残り続けてくれます。</p>
      
      <h3 style="font-size:1.4rem;color: #a8d0ff;">広告を表示</h3>
      <p><strong>リワード広告を表示：</strong>
        ユーザーが動画を最後まで見たら報酬をあげたい時、こんな風に書けます↓</p>
      <div style="position: relative; background-color: #1e1e1e; border-radius: 8px; padding: 16px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 13px; line-height: 1.5; max-height: 200px; overflow-y: auto; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">AdsManager.Instance.ShowRewardedAd((completed) =&gt; {</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">&nbsp; &nbsp; if (completed) {</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">&nbsp; &nbsp; &nbsp; &nbsp; // ここに報酬を付与する処理を書く</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">&nbsp; &nbsp; &nbsp; &nbsp; Debug.Log("報酬をゲット！");</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">&nbsp; &nbsp; } else {</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">&nbsp; &nbsp; &nbsp; &nbsp; // 広告が読み込めなかった、または途中で閉じられた場合</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">&nbsp; &nbsp; &nbsp; &nbsp; Debug.Log("報酬はなし...");</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">&nbsp; &nbsp; }</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">});</span></span></p>
</div>
      
      <p><strong>インタースティシャル広告を表示：</strong>
        ステージクリア時などに全画面広告を出したい時はこちら↓</p>
   <div style="position: relative; background-color: #1e1e1e; border-radius: 8px; padding: 16px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 13px; line-height: 1.5; max-height: 200px; overflow-y: auto; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">AdsManager.Instance.ShowInterstitialAd((completed) =&gt; {</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">&nbsp; &nbsp; // 広告が終わった後の処理（次のステージへ進むなど）</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">});</span></span></p>
</div>
      
      <p><strong>バナー広告を表示：</strong>
        別途バナー広告を出したい時はこちら。（デフォルトでは基本常時表示）</p>
      <div style="position: relative; background-color: #1e1e1e; border-radius: 8px; padding: 16px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 13px; line-height: 1.5; max-height: 200px; overflow-y: auto; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">AdsManager.Instance.</span></span><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">ShowBannerAd((completed) =&gt; {</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">&nbsp; &nbsp; //&nbsp;</span><span style="font-size: 13px;">広告が終わった後の処理（切り替えなど）</span></span></p>
<p style="color: #ffffff;"><span color="#FFFFFF" face="Consolas, Monaco, Courier New, monospace" style="color: #ffffff; font-family: Consolas, Monaco, 'Courier New', monospace;"><span style="font-size: 13px;">});</span></span></p>
</div>
      
      <h3 style="font-size:1.4rem;color: #a8d0ff;">広告の事前読み込み</h3>
      <p>広告って、いざ表示しようとした時に読み込み始めると、数秒の待ち時間が発生してユーザーの体験を損ねてしまいますよね。
        このマネージャーは、初期化時や広告を閉じた直後に、次の広告を自動でバックグラウンドで読み込んでおきます。
        ユーザーがボタン押した時には、既に準備ができている状態（IsAdReady）にしているので、ストレスなく広告を表示できるんです。</p>
      
      <h3 style="font-size:1.4rem;color: #a8d0ff;">バナー広告の制御</h3>
      <p>全画面広告が出ている時に、バナー広告が重なって表示されると、見た目も悪いしポリシー違反になる可能性もあります。
        このコードでは、全画面広告を表示する瞬間にバナーを非表示にし、広告が閉じられたら自動で再表示するようにしています。
        CloseBannerAd() と ViewBannerAd() が裏で制御されてるので、何も気にしなくて大丈夫です。</p>
      
      <h3 style="font-size:1.4rem;color: #a8d0ff;">状態管理の徹底</h3>
      <p>「広告ボタンを連打されたらどうしよう？」という心配も無用です。
        isRewardedAdLoading や isShowingRewardedAd といったフラグを使って、「今読み込み中か？」「今表示中か？」を厳密に管理しています。
        既に処理が走っている場合は新しいリクエストを弾くようになっているので、予期せぬエラーを防ぐことができます。</p></section>
    
    <!--サイト内誘導広告-->
    <div style="width:100%; height:auto;padding: 0;margin: 0 0 20px 0;">
        <!-- <div style="width: 100%; max-width: 1200px; margin: 0 auto; padding: 20px 10px; box-sizing: border-box; font-family: 'Hiragino Kaku Gothic ProN', 'メイリオ', sans-serif;"> -->
            
            <!-- スクロールコンテナ -->
            <div style="position: relative; overflow: hidden; background: rgba(255, 255, 255, 0.08); border-radius: 15px; padding: 15px;border: 1px solid rgba(255, 255, 255, 0.1);">
                <!-- 左矢印 -->
                <div id="prevBtn" style="position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 40px; height: 40px; background: rgba(0,0,0,0.5); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10; border-radius: 50%; font-size: 20px; user-select: none;">❮</div>
                
                <!-- 右矢印 -->
                <div id="nextBtn" style="position: absolute; right: 0; top: 50%; transform: translateY(-50%); width: 40px; height: 40px; background: rgba(0,0,0,0.5); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10; border-radius: 50%; font-size: 20px; user-select: none;">❯</div>
                
                <!-- コンテンツ表示エリア -->
                <div id="contentWrapper" style="display: flex; transition: transform 0.5s ease; margin: 0 50px;"></div>
            </div>
            
            <!-- インジケーター -->
            <div id="indicators" style="display: flex; justify-content: center; gap: 8px; margin-top: 15px;"></div>
        <!-- </div> -->
    </div>
    <script defer="defer">
        (function() {
    // ========================================
    // ここでコンテンツを編集できます
    // ========================================
    const contents =     [
        {
            "title": "Easy Save The Complete Save Game Data Serializer System",
            "image": "https://assetstorev1-prd-cdn.unity3d.com/key-image/2b3d230f-49d0-456a-9678-6fbf7b4e2722.webp",
            "link": "https://assetstore.unity.com/packages/tools/utilities/easy-save-the-complete-save-game-data-serializer-system-768?aid=1101l3IyTm"
        },
        {
            "title": "Anti Cheat Toolkit",
            "image": "https://assetstorev1-prd-cdn.unity3d.com/key-image/29ab0c2b-c3bf-467e-9ad4-c9df04cccebf.webp",
            "link": "https://assetstore.unity.com/packages/tools/utilities/anti-cheat-toolkit-202695?aid=1101l3IyTm"
        },
        {
            "title": "IAP Manager Easy In App Purchase Workflow",
            "image": "https://assetstorev1-prd-cdn.unity3d.com/key-image/80034515-7c10-4d87-b470-f8f9a415b79a.webp",
            "link": "https://assetstore.unity.com/packages/tools/integration/iap-manager-easy-in-app-purchase-workflow-59353?aid=1101l3IyTm"
        }
    ];
    // ========================================

    let currentIndex = 0;
    let autoScrollTimer;
    const autoScrollInterval = 8000; // 8秒ごとに自動スクロール

    const contentWrapper = document.getElementById('contentWrapper');
    const indicatorsDiv = document.getElementById('indicators');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    // レスポンシブ判定
    function isMobile() {
        return window.innerWidth < 768;
    }

    // 1ページあたりの表示数
    function getItemsPerPage() {
        return isMobile() ? 1 : 3;
    }

    // 総ページ数
    function getTotalPages() {
        return Math.ceil(contents.length / getItemsPerPage());
    }

    // コンテンツHTML生成
    function createContentHTML(content, index) {
        const itemsPerPage = getItemsPerPage();
        const width = isMobile() ? '100%' : 'calc(33.333% - 10px)';
        
        return `
        <div style="flex: 0 0 ${width}; min-width: ${width}; padding: 10px; box-sizing: border-box;">
            <a href="${content.link}" target="_blank" style="text-decoration: none; color: inherit; display: block;">
            <div style=" background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; height: 100%;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.2)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)';">
                <div style="position: relative; padding-top: 133.33%; overflow: hidden;  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <img src="${content.image}" alt="${content.title}" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22300%22 height=%22400%22%3E%3Crect fill=%22%23ddd%22 width=%22300%22 height=%22400%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23999%22%3ENo Image%3C/text%3E%3C/svg%3E';">
                </div>
                <div style="padding: 12px;">
                <div style="font-size: 14px; font-weight: bold; line-height: 1.4; color: #ffffff; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; min-height: 2.8em;">${content.title}</div>
                </div>
            </div>
            </a>
        </div>
        `;
    }

    // コンテンツ描画
    function renderContents() {
        contentWrapper.innerHTML = contents.map((content, index) => createContentHTML(content, index)).join('');
    }

    // インジケーター描画
    function renderIndicators() {
        const totalPages = getTotalPages();
        indicatorsDiv.innerHTML = '';
        
        for (let i = 0; i < totalPages; i++) {
        const dot = document.createElement('div');
        dot.style.cssText = `
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: ${i === currentIndex ? '#007bff' : '#ccc'};
            cursor: pointer;
            transition: background 0.3s;
        `;
        dot.addEventListener('click', () => goToPage(i));
        indicatorsDiv.appendChild(dot);
        }
    }

    // ページ移動
    function goToPage(index) {
        const totalPages = getTotalPages();
        currentIndex = (index + totalPages) % totalPages;
        
        const itemsPerPage = getItemsPerPage();
        const wrapperWidth = contentWrapper.offsetWidth;
        const offset = currentIndex * wrapperWidth;
        contentWrapper.style.transform = `translateX(-${offset}px)`;
        
        renderIndicators();
        resetAutoScroll();
    }

    // 次へ
    function nextPage() {
        goToPage(currentIndex + 1);
    }

    // 前へ
    function prevPage() {
        goToPage(currentIndex - 1);
    }

    // 自動スクロールリセット
    function resetAutoScroll() {
        clearInterval(autoScrollTimer);
        autoScrollTimer = setInterval(nextPage, autoScrollInterval);
    }

    // イベントリスナー
    nextBtn.addEventListener('click', nextPage);
    prevBtn.addEventListener('click', prevPage);

    // リサイズ対応
    let resizeTimer;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => {
        currentIndex = 0;
        renderContents();
        goToPage(0);
        }, 250);
    });

    // 初期化
    renderContents();
    renderIndicators();
    goToPage(0);

    // マウスオーバーで自動スクロール一時停止
    contentWrapper.parentElement.addEventListener('mouseenter', () => {
        clearInterval(autoScrollTimer);
    });

    contentWrapper.parentElement.addEventListener('mouseleave', () => {
        resetAutoScroll();
    });
    })();
    </script>

    <section class="section" id="section-4">
      <h2>まとめ</h2>
      <p>いかがでしたか？ 今回は、LevelPlay（ironSource）の実装を楽にするマネージャースクリプトをご紹介しました。
        広告実装って、最初は「面倒だな……」と感じるかもしれませんが、こうして1つのマネージャーにまとめてしまえば、次からのプロジェクトでも使い回せる最強の武器になります。
        皆さんのゲーム開発が、少しでも快適になれば嬉しいです。
        ぜひ、プロジェクトに合わせてカスタマイズして使ってみて下さいね。
        それでは、また別の記事でお会いましょう。。_(:3 」∠)_</p>
    </section>

    <section class="section">
      <h2>他の記事</h2>
      <p>AIツール・開発・アプリ関連の記事を取り扱っています。</p>
      <a href="../../blogs.html" class="btn" alt="ブログ記事一覧">全記事一覧</a>
      <!--本番執筆の際に前と次を設定↓-->
      <a href="blog_dev_2.html" class="btn" alt="次の記事">次の記事→</a>
    </section>
    <section class="section">
      <h2>ツール</h2>
      <p>本サイトでは、暮らしや作業をサポートするウェブツールの運営もしております。</p>
      <a href="../../tools.html" class="btn" alt="ツール一覧">ツール一覧</a>
    </section>
    <section class="section">
      <h2>いいなと思ったら応援</h2>
      <p>以下の方法で応援を受け付けております。</p>
      <a href="https://www.paypal.com/paypalme/hayadebisub" class="btn" target="_blank" rel="nofollow" referrerpolicy="no-referrer-when-downgrade" alt="PayPalで支援">PayPal.Me:チップを送って応援</a>
      <button onclick="generateTweetURL( 'ハヤデビのツール工房では役立つブログ記事も発信中！\n是非チェックしてみよう↓', 'hayadebi.github.io/Accounting-ai-app/', 'ブログ' )" class="btn" style="border: none;" alt="Xでシェア">X:シェアして応援</button>
    </section>
    <section class="section">
      <div style="margin-bottom: 20px;">
        <center>
          <img src="https://pbs.twimg.com/media/G5mBHiiacAIWGvt?format=png&name=900x900" alt="ハヤデビのロゴ" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid #00bfff; box-shadow: 0 0 15px rgba(0, 191, 255, 0.5);">
        </center>
      </div>
      <h2>著者兼運営:ハヤデビ</h2>
      <p>長きにわたりゲームやアプリの開発・動画編集・ブログ運営等を続けている個人クリエイター</p>
      <a href="https://x.com/hayadebi" class="btn" target="_blank" rel="nofollow" referrerpolicy="no-referrer-when-downgrade" alt="X公式アカウント">X(旧Twitter):公式アカウント</a>
    </section>
  </main>
  <footer class="footer">
    <div class="footer-content">
      <a href="../../notation.html" alt="必要表記一覧">運営上必要表記</a>
      <a href="../../sitemap.html" alt="必要表記一覧">サイトマップ</a>
      <p>© ハヤデビのツール工房</p>
    </div>
  </footer>
  <script defer>
  // ハンバーガーメニューの動作
          const hamburger = document.getElementById('hamburger');
          const navLinks = document.getElementById('navLinks');
  
          hamburger.addEventListener('click', () => {
              hamburger.classList.toggle('active');
              navLinks.classList.toggle('active');
          });
  
          // メニュー項目クリック時にメニューを閉じる
          const navItems = navLinks.querySelectorAll('a');
          navItems.forEach(item => {
              item.addEventListener('click', () => {
                  if (window.innerWidth <= 768) {
                      hamburger.classList.remove('active');
                      navLinks.classList.remove('active');
                  }
              });
          });
  </script>
  <script src="../../CoreImplementation/TweetManager.js" defer></script>
  <script src="../../Ads/BlogAds.js" defer></script>
  <script defer>
  function toggleDetails(button, targetId) {
              const targetElement = document.getElementById(targetId);
              if (targetElement.style.display === 'none' || targetElement.style.display === '') {
                  targetElement.style.display = 'grid';
                  button.textContent = '一覧を隠す';
              } else {
                  targetElement.style.display = 'none';
                  button.textContent = '一覧を表示';
              }
          }
  </script>
  <div class="centerad-widget">
  </div>
  <script src="../../Ads/BlogCenterAds.js" rel="preload"></script>
</body>

</html>